const recNumLoc=document.querySelector(".records-number"),noResultsLoc=document.querySelector(".no-results"),resultsLoc=document.querySelector(".results"),pagesSwitchLoc=document.querySelector(".pages-container");let pageButtonsLoc=document.querySelectorAll(".page");const dropDownFilterLoc=document.querySelector(".drop-down-filters"),dropDownLoc=document.querySelector(".drop-down-btn"),dropDownBtnLoc=document.querySelector(".drop-down-btn img"),moreFiltersLoc=document.querySelector(".more-filters"),lessFiltersLoc=document.querySelector(".less-filters"),recordsOnPageLoc=document.querySelectorAll(".recordsOnPage span"),branchesLoc=document.querySelector(".branches"),jobFormLoc=document.querySelector(".job-form"),jobTypeLoc=document.querySelector(".job-type"),langLoc=document.querySelector(".lang"),countriesLoc=document.querySelector(".countries"),citiesLoc=document.querySelector(".cities"),locationMarkLoc=document.querySelector("#localization"),locationDotLoc=document.querySelector("#loc-slider"),locationSliderLoc=document.querySelector(".distance-slider .slider-container .container"),locationValuesLoc=document.querySelector(".distance-slider .slider-values"),displayValDistance=document.getElementById("range3"),salaryMarkLoc=document.querySelector("#salary-mark"),salarySliderLoc=document.querySelector(".salary .slider-container .container"),salaryValuesLoc=document.querySelector(".salary .slider-values"),sliderOne=document.querySelector("#slider-1"),sliderTwo=document.querySelector("#slider-2"),displayValOne=document.getElementById("range1"),displayValTwo=document.getElementById("range2"),sliderTrack=document.querySelector(".salary .slider-track"),pauseLoc=document.querySelector(".salary .pause"),remoteLoc=document.querySelector("#remote"),relocationLoc=document.querySelector("#relocation"),searchInputLoc=document.querySelector(".search-input input"),searchBtn=document.querySelector(".search-btn");let apiPage=1,rawAPIArray=[],allRecordsArray=[],filterBranchesList=[],filterJobFormList=[],filterJobTypeList=[],filterLangList=[],filterMinSalary=1e5,filterMaxSalary=0,filterCountriesList={},recordsNumber=0,firstRecordNumber=0,recordsOnPage=20,filterListMaxHeight=0,filtersON=!1,filteredRecordsArray_10=[];searchInputLoc.value="",locationMarkLoc.checked=!1,locationDotLoc.disabled=!0,countriesLoc.disabled=!0,citiesLoc.disabled=!0,locationDotLoc.value=0,salaryMarkLoc.checked=!1,sliderOne.disabled=!0,sliderTwo.disabled=!0,remoteLoc.checked=!1,relocationLoc.checked=!1;const createDataForFilters=(e,o,t,r,i,a,l,s,n,c,d)=>{-1===filterBranchesList.indexOf(e)&&filterBranchesList.push(e),o&&o.forEach((function(e){-1===filterJobFormList.indexOf(e)&&filterJobFormList.push(e)})),-1===filterJobTypeList.indexOf(t)&&filterJobTypeList.push(t),-1===filterLangList.indexOf(r)&&filterLangList.push(r),i&&(a<filterMinSalary&&(filterMinSalary=a),l>filterMaxSalary&&(filterMaxSalary=l)),filterCountriesList[s]?-1===filterCountriesList[s].findIndex((e=>e.city===n))&&filterCountriesList[s].push({city:n,lati:c,longi:d}):(filterCountriesList[s]=[],filterCountriesList[s].push({city:n,lati:c,longi:d}))},reworkData=e=>{e.forEach((e=>{var o,t,r,i,a,l,s,n,c,d,u;e.options.job_location&&(parsedJobLocation=JSON.parse(e.options.job_location)),allRecordsArray.push({url:e.url,name:e.advert.name,branche:e.options.branches,lang:e.advert.language,jobType:e.options.job_type,visibleRate:parseInt(e.options._Widoczna_stawka),salaryFrom:parseInt(e.options._spodziewane_wynagrodzenie_od),salaryTo:parseInt(e.options._spodziewane_wynagrodzenie_do),remote:e.options.remote,relocation:e.options._relokacja,recruitmentType:e.options._rekrutacja_rodzaj,jobForm:e.options._forma_zatrudnienia,country:parsedJobLocation.country,city:parsedJobLocation.locality,lati:parseFloat(parsedJobLocation.latitude),longi:parseFloat(parsedJobLocation.longitude),description:e.advert.values}),o=e.options.branches,t=e.options._forma_zatrudnienia,r=e.options.job_type,i=e.advert.language,a=parseInt(e.options._Widoczna_stawka),l=parseInt(e.options._spodziewane_wynagrodzenie_od),s=parseInt(e.options._spodziewane_wynagrodzenie_do),n=parsedJobLocation.country,c=parsedJobLocation.locality,d=parseFloat(parsedJobLocation.latitude),u=parseFloat(parsedJobLocation.longitude),-1===filterBranchesList.indexOf(o)&&filterBranchesList.push(o),t&&t.forEach((function(e){-1===filterJobFormList.indexOf(e)&&filterJobFormList.push(e)})),-1===filterJobTypeList.indexOf(r)&&filterJobTypeList.push(r),-1===filterLangList.indexOf(i)&&filterLangList.push(i),a&&(l<filterMinSalary&&(filterMinSalary=l),s>filterMaxSalary&&(filterMaxSalary=s)),filterCountriesList[n]?-1===filterCountriesList[n].findIndex((e=>e.city===c))&&filterCountriesList[n].push({city:c,lati:d,longi:u}):(filterCountriesList[n]=[],filterCountriesList[n].push({city:c,lati:d,longi:u}))}))},summariseDownload=e=>{recNumLoc.innerText=`Znaleziono ${e} ogłoszeń`,e?noResultsLoc.classList.remove("active"):noResultsLoc.classList.add("active")},createRecordBoxes=(e,o,t)=>{for(resultsLoc.replaceChildren(),i=o;i<t;i++)if(e[i]){let o="",t="";"PT"===e[i].recruitmentType&&(o="pt-border",t="pt-text"),"RS"===e[i].recruitmentType&&(o="rs-border",t="rs-text"),"WEW"===e[i].recruitmentType&&(o="wew-border",t="wew-text");let r="";e[i].jobForm&&e[i].jobForm.forEach((function(e){r=r+"<p>"+e+"</p>"})),resultsLoc.insertAdjacentHTML("beforeend",`<a href="${e[i].url}" target="_blank"><div class="result ${o}">\n            <div class="top">\n                <div class="top-left">\n                    <div class="lang"><p>${e[i].lang}</p></div>\n                    <div class="branche-name">\n                        <div class="branche">${e[i].branche?e[i].branche:""}</div>\n                        <div class="name ${t}">${e[i].name}</div>\n                    </div>\n                </div>\n                <div class="top-right">\n                    ${e[i].jobType?"<div class='jobtype'>"+e[i].jobType+"</div>":""}\n                    ${e[i].visibleRate&&e[i].salaryFrom&&e[i].salaryTo?"<div class='salary'>"+e[i].salaryFrom+" - "+e[i].salaryTo+"</div>":""}\n                </div>\n            </div>\n\n            <div class="bottom">\n                <div class="bottom-left">\n                    <div class="city"><img src="./img/location_dot.svg">${e[i].city}</div>\n                    ${e[i].remote?"<div class='remote'>zdalna</div>":""}\n                    ${e[i].relocation?"<div class='relocation'>relocation</div>":""}\n                </div>\n                    <div class="bottom-right">\n                        <div class="employmentform">${r}</div>\n                    </div>\n                </div>\n            </div>\n\n        </div></a>`)}},getAPI=e=>fetch("https://grupaprogres.traffit.com/public/job_posts/published",{mode:"cors",headers:{"Content-Type":"application/json","X-Request-Page-Size":"100","X-Request-Current-Page":e,"X-Request-Sort":'{"sort_by": "id", "direction": "ASC"}'}}),loopOnAPI=e=>{e.length>0?(rawAPIArray=rawAPIArray.concat(e),apiPage++,createRecordsObjFromAPI(apiPage)):(reworkData(rawAPIArray),recordsNumber=rawAPIArray.length,summariseDownload(recordsNumber),createRecordBoxes(allRecordsArray,firstRecordNumber,recordsOnPage),setPages(recordsNumber),createFilterLists())};async function createRecordsObjFromAPI(e){const o=await getAPI(e),t=await o.json();loopOnAPI(t)}createRecordsObjFromAPI(apiPage);const createFilterLists=()=>{if(filterBranchesList.length>0&&(filterBranchesList.sort((function(e,o){return e.localeCompare(o)})),rowHeight=21*filterBranchesList.length+3,filterListMaxHeight=rowHeight,branchesLoc.style.height=String(rowHeight)+"px",filterBranchesList.forEach((function(e){branchesLoc.insertAdjacentHTML("beforeend",`<option value="${e}">${e}</option>`)}))),filterJobFormList.length>0&&(filterJobFormList.sort((function(e,o){return e.localeCompare(o)})),rowHeight=21*filterJobFormList.length+3,jobFormLoc.style.height=String(rowHeight)+"px",filterJobFormList.forEach((function(e){jobFormLoc.insertAdjacentHTML("beforeend",`<option value="${e}">${e}</option>`)}))),filterJobTypeList.length>0&&(filterJobTypeList.sort((function(e,o){return e.localeCompare(o)})),rowHeight=21*filterJobTypeList.length+3,jobTypeLoc.style.height=String(rowHeight)+"px",filterJobTypeList.forEach((function(e){jobTypeLoc.insertAdjacentHTML("beforeend",`<option value="${e}">${e}</option>`)}))),filterLangList.length>0&&(filterLangList.sort((function(e,o){return e.localeCompare(o)})),rowHeight=21*filterLangList.length+3,langLoc.style.height=String(rowHeight)+"px",filterLangList.forEach((function(e){langLoc.insertAdjacentHTML("beforeend",`<option value="${e}">${e}</option>`)}))),Object.keys(filterCountriesList).length>0){function e(e,o){return e.city.localeCompare(o.city)}countriesLoc.insertAdjacentHTML("beforeend",'<option value="" class="placeholder">Państwo</option>'),citiesLoc.insertAdjacentHTML("beforeend",'<option value="" class="placeholder">Miasto</option>');for(let r in filterCountriesList)filterCountriesList[r].sort(e);filterCountriesList=Object.keys(filterCountriesList).sort().reduce(((e,o)=>(e[o]=filterCountriesList[o],e)),{});let o=[];for(let i in filterCountriesList)countriesLoc.insertAdjacentHTML("beforeend",`<option value="${i}">${i}</option>`),o=o.concat(filterCountriesList[i]);let t=[];o.forEach((e=>{t.push(e.city)})),t.sort((function(e,o){return e.localeCompare(o)})),t.forEach((function(e){citiesLoc.insertAdjacentHTML("beforeend",`<option value="${e}" class="active">${e} </option>`)}))}sliderOne.min=filterMinSalary.toString(),sliderTwo.min=filterMinSalary.toString(),sliderOne.max=filterMaxSalary.toString(),sliderTwo.max=filterMaxSalary.toString(),sliderOne.value=filterMinSalary.toString(),sliderTwo.value=filterMaxSalary.toString(),slideOne(),slideTwo()},createFilteredRecordsArray=()=>{const e=document.querySelectorAll(".branches option"),o=document.querySelectorAll(".job-form option"),t=document.querySelectorAll(".job-type option"),r=document.querySelectorAll(".lang option"),i=document.querySelectorAll(".countries option"),a=document.querySelectorAll(".cities option");let l=allRecordsArray;console.log(allRecordsArray);let s=Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}));console.log(s);let n=[];0!==s.length?l.forEach(((e,o)=>{let t=!1;s.forEach((o=>{e.branche===o&&(t=!0)})),t&&(console.log(o),n.push(e))})):n=l,console.log(n);let c=Array.from(o).filter((function(e){return e.selected})).map((function(e){return e.value}));console.log(c);let d=[];0!==c.length?n.forEach(((e,o)=>{if(e.jobForm){let t=!1;c.forEach((o=>{-1!==e.jobForm.indexOf(o)&&(t=!0)})),t&&(console.log(o),d.push(e))}})):d=n,console.log(d);let u=Array.from(t).filter((function(e){return e.selected})).map((function(e){return e.value}));console.log(u);let L=[];0!==u.length?d.forEach(((e,o)=>{let t=!1;u.forEach((o=>{e.jobType===o&&(t=!0)})),t&&(console.log(o),L.push(e))})):L=d,console.log(L);let f=Array.from(r).filter((function(e){return e.selected})).map((function(e){return e.value}));console.log(f);let p,y,g=[];0!==f.length?L.forEach(((e,o)=>{let t=!1;f.forEach((o=>{e.lang===o&&(t=!0)})),t&&(console.log(o),g.push(e))})):g=L,console.log(g),salaryMarkLoc.checked&&(p=parseInt(displayValOne.innerText),y=parseInt(displayValTwo.innerText)),console.log(p),console.log(y);let m=[];salaryMarkLoc.checked?g.forEach(((e,o)=>{let t=!1;e.visibleRate&&(e.salaryTo&&e.salaryFrom&&e.salaryTo>=p&&e.salaryFrom<=y&&(t=!0),e.salaryTo&&!e.salaryFrom&&e.salaryTo>=p&&(t=!0),!e.salaryTo&&e.salaryFrom&&e.salaryFrom<=y&&(t=!0)),t&&(console.log(o),m.push(e))})):m=g,console.log(m);let h=[];locationMarkLoc.checked&&(h=Array.from(i).filter((function(e){if(e.value)return e.selected})).map((function(e){if(e.value)return e.value}))),console.log(h);let v=[];locationMarkLoc.checked&&h.length?m.forEach(((e,o)=>{let t=!1;h.forEach((o=>{e.country===o&&(t=!0)})),t&&(console.log(o),v.push(e))})):v=m,console.log(v);let b=[];locationMarkLoc.checked&&(b=Array.from(a).filter((function(e){if(e.value)return e.selected})).map((function(e){if(e.value)return e.value}))),console.log(b);let S=[];if(locationMarkLoc.checked)if(b.length){let e,o,t,r,i,a,l=0;l=parseInt(locationDotLoc.value),console.log(l),v.forEach(((s,n)=>{s.city===b[0]&&(e=s.lati,o=s.longi,console.log(n),console.log(e),console.log(o),t=e-.009044*l,r=e+.009044*l,i=o-.0089831*l/Math.cos(e*Math.PI/180),a=o+.0089831*l/Math.cos(e*Math.PI/180),console.log(t),console.log(r),console.log(i),console.log(a))})),v.forEach(((e,o)=>{let l=!1;e.lati<=r&&e.lati>=t&&e.longi<=a&&e.longi>=i&&(l=!0),l&&(console.log(o),S.push(e))}))}else S=v;else S=v;console.log(S);let w=[];remoteLoc.checked?S.forEach(((e,o)=>{let t=!1;e.remote&&(t=!0),t&&(console.log(o),w.push(e))})):w=S,console.log(w);let T=[];relocationLoc.checked?w.forEach(((e,o)=>{let t=!1;e.relocation&&(t=!0),t&&(console.log(o),T.push(e))})):T=w,console.log(T),filteredRecordsArray_10=[];let O=searchInputLoc.value;O?T.forEach(((e,o)=>{let t,r=!1;e.description.forEach((function(e){e.value&&"geolocation"!==e.field_id&&(t=e.value.toLowerCase().search(O.toLowerCase()),-1!==t&&(r=!0))})),t=e.name.toLowerCase().search(O.toLowerCase()),-1!==t&&(r=!0),r&&(console.log(o),filteredRecordsArray_10.push(e))})):filteredRecordsArray_10=T,console.log(filteredRecordsArray_10),recordsNumber=filteredRecordsArray_10.length,summariseDownload(recordsNumber),createRecordBoxes(filteredRecordsArray_10,0,recordsOnPage),setPages(recordsNumber),filtersON=!0};function slideDistance(){displayValDistance.textContent=locationDotLoc.value}searchBtn.addEventListener("click",createFilteredRecordsArray),locationMarkLoc.addEventListener("change",(function(e){e.target.checked?(citiesLoc.value&&(locationSliderLoc.classList.remove("unactive"),locationValuesLoc.classList.remove("unactive"),locationDotLoc.disabled=!1),countriesLoc.disabled=!1,citiesLoc.disabled=!1):(locationSliderLoc.classList.add("unactive"),locationValuesLoc.classList.add("unactive"),locationDotLoc.disabled=!0,countriesLoc.disabled=!0,citiesLoc.disabled=!0)}));const activateCities=()=>{citiesLoc.querySelectorAll("option").forEach((e=>{countriesLoc.value?-1!==filterCountriesList[countriesLoc.value].findIndex((o=>o.city===e.value))?e.classList.add("active"):e.classList.remove("active"):e.classList.add("active")}))};countriesLoc.addEventListener("change",(function(){activateCities(),countriesLoc.value?filterCountriesList[countriesLoc.value].find((e=>e.city!==citiesLoc.value))&&(citiesLoc.value=filterCountriesList[countriesLoc.value][0].city,locationSliderLoc.classList.remove("unactive"),locationValuesLoc.classList.remove("unactive"),locationDotLoc.disabled=!1):(citiesLoc.value=citiesLoc[0].value,locationSliderLoc.classList.add("unactive"),locationValuesLoc.classList.add("unactive"),locationDotLoc.disabled=!0)})),citiesLoc.addEventListener("change",(function(){Object.keys(filterCountriesList).find((e=>{-1!==filterCountriesList[e].findIndex((e=>e.city===citiesLoc.value))&&countriesLoc.value!==e&&(countriesLoc.value=e,activateCities())})),citiesLoc.value?(locationSliderLoc.classList.remove("unactive"),locationValuesLoc.classList.remove("unactive"),locationDotLoc.disabled=!1):(locationSliderLoc.classList.add("unactive"),locationValuesLoc.classList.add("unactive"),locationDotLoc.disabled=!0)}));let minGap=0;function slideOne(){parseInt(sliderTwo.value)-parseInt(sliderOne.value)<=minGap&&(sliderOne.value=parseInt(sliderTwo.value)-minGap),displayValOne.textContent=sliderOne.value,sliderOne.value===sliderTwo.value?(console.log("HHHHH"),sliderOne.style.zIndex="1"):sliderOne.style.zIndex="0",fillColor()}function slideTwo(){parseInt(sliderTwo.value)-parseInt(sliderOne.value)<=minGap&&(sliderTwo.value=parseInt(sliderOne.value)+minGap),displayValTwo.textContent=sliderTwo.value,"100000"===displayValTwo.textContent&&(salaryMarkLoc.disabled=!0,displayValOne.textContent="",displayValTwo.textContent="",pauseLoc.textContent=""),fillColor()}function fillColor(){percent1=(sliderOne.value-sliderOne.min)/(sliderOne.max-sliderOne.min)*100,percent2=(sliderTwo.value-sliderOne.min)/(sliderOne.max-sliderOne.min)*100,sliderTrack.style.background=`linear-gradient(to right, #dadae5 ${percent1}%, #fe7320ff ${percent1}%, #fe7320ff ${percent2}%, #dadae5 ${percent2}%)`}sliderOne.value=filterMaxSalary.toString(),sliderTwo.value=filterMinSalary.toString(),salaryMarkLoc.addEventListener("change",(function(e){e.target.checked?(salarySliderLoc.classList.remove("unactive"),salaryValuesLoc.classList.remove("unactive"),sliderOne.disabled=!1,sliderTwo.disabled=!1):(salarySliderLoc.classList.add("unactive"),salaryValuesLoc.classList.add("unactive"),sliderOne.disabled=!0,sliderTwo.disabled=!0)}));const changePage=e=>{pageButtonsLoc.forEach((e=>{e.classList.remove("active")})),e.classList.add("active");let o=recordsOnPage*parseInt(e.innerText)-recordsOnPage,t=recordsOnPage*parseInt(e.innerText);createRecordBoxes(filtersON?filteredRecordsArray_10:allRecordsArray,o,t)},setPages=e=>{let o=Math.ceil(e/recordsOnPage);for(pagesSwitchLoc.replaceChildren(),n=1;n<=o;n++)1===n?pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page active">${n}</div>`):pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page">${n}</div>`);pageButtonsLoc=document.querySelectorAll(".page"),pageButtonsLoc.forEach((e=>{e.addEventListener("click",(e=>{changePage(e.target)}))}))};recordsOnPageLoc.forEach((e=>{e.addEventListener("click",(e=>{recordsOnPageLoc.forEach((e=>{e.classList.remove("active")})),document.querySelector(`[data-value='${e.target.dataset.value}']`).classList.add("active"),recordsOnPage=parseInt(e.target.dataset.value),createRecordBoxes(filtersON?filteredRecordsArray_10:allRecordsArray,0,recordsOnPage),setPages(recordsNumber)}))})),dropDownLoc.addEventListener("click",(()=>{dropDownBtnLoc.classList.toggle("up"),dropDownFilterLoc.classList.contains("show")?(dropDownFilterLoc.classList.remove("show"),dropDownFilterLoc.style.maxHeight=String(0)+"px",moreFiltersLoc.classList.remove("hide"),lessFiltersLoc.classList.remove("show")):(dropDownFilterLoc.classList.add("show"),dropDownFilterLoc.style.maxHeight=String(filterListMaxHeight+200)+"px",moreFiltersLoc.classList.add("hide"),lessFiltersLoc.classList.add("show"))}));
//# sourceMappingURL=all.min.js.map
