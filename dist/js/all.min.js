const resultsLoc=document.querySelector(".results"),branchesLoc=document.querySelector(".branches"),jobFormLoc=document.querySelector(".job-form"),jobTypeLoc=document.querySelector(".job-type"),langLoc=document.querySelector(".lang"),sliderOne=document.getElementById("slider-1"),sliderTwo=document.getElementById("slider-2"),displayValOne=document.getElementById("range1"),displayValTwo=document.getElementById("range2"),sliderTrack=document.querySelector(".slider-track"),recNumLoc=document.querySelector(".records-number"),searchBtn=document.querySelector(".search-btn"),remoteLoc=document.querySelector("#remote"),relocationLoc=document.querySelector("#relocation"),salaryMarkLoc=document.querySelector("#salary-mark"),salarySliderLoc=document.querySelector(".slider-container .container"),salaryValuesLoc=document.querySelector(".values"),salaryMinDotLoc=document.querySelector("#slider-1"),salaryMaxDotLoc=document.querySelector("#slider-2");let apiPage=1,apiDataLength=0,filterBranchesList=[],filterJobFormList=[],filterjobTypeList=[],filterlangList=[],filterMinSalary=1e5,filterMaxSalary=0,recordsNumber=0,isEmpty=!0,filterObj={};remoteLoc.checked=!1,relocationLoc.checked=!1,salaryMarkLoc.checked=!1,salaryMinDotLoc.disabled=!0,salaryMaxDotLoc.disabled=!0,salaryMarkLoc.addEventListener("change",(function(e){e.target.checked?(salarySliderLoc.classList.remove("unactive"),salaryValuesLoc.classList.remove("unactive"),salaryMinDotLoc.disabled=!1,salaryMaxDotLoc.disabled=!1):(salarySliderLoc.classList.add("unactive"),salaryValuesLoc.classList.add("unactive"),salaryMinDotLoc.disabled=!0,salaryMaxDotLoc.disabled=!0)}));const getAPI=e=>new Promise((o=>{o(fetch("https://grupaprogres.traffit.com/public/job_posts/published",{mode:"cors",headers:{"Content-Type":"application/json","X-Request-Page-Size":"100","X-Request-Current-Page":e,"X-Request-Sort":'{"sort_by": "id", "direction": "ASC"}'}}))})),getAPIJSON=e=>new Promise((o=>{o(e.json())})),getAPIJSONLen=e=>new Promise((o=>{o({apiArray:e,apiArrayLen:e.length})})),getAPIPage=(e,o)=>{getAPI(e).then((e=>getAPIJSON(e))).then((e=>getAPIJSONLen(e))).then((e=>{apiDataLength=e.apiArrayLen,apiDataLength>0?showDataInHtml(e.apiArray,o):(isEmpty&&filterHTML(filterBranchesList,filterJobFormList,filterjobTypeList,filterlangList,filterMinSalary,filterMaxSalary),recNumLoc.insertAdjacentHTML("beforeend",`Znaleziono ${recordsNumber} ogłoszeń`))}))};getAPIPage(apiPage,filterObj);const showDataInHtml=(e,o)=>{let n;isEmpty=0===Object.keys(o).length,e.forEach((function(e){if(isEmpty)-1===filterBranchesList.findIndex((o=>o===e.options.branches))&&filterBranchesList.push(e.options.branches),e.options._forma_zatrudnienia&&e.options._forma_zatrudnienia.forEach((function(e){-1===filterJobFormList.findIndex((o=>o===e))&&filterJobFormList.push(e)})),-1===filterjobTypeList.findIndex((o=>o===e.options.job_type))&&filterjobTypeList.push(e.options.job_type),-1===filterlangList.findIndex((o=>o===e.advert.language))&&filterlangList.push(e.advert.language),parseInt(e.options._Widoczna_stawka)&&(parseInt(e.options._spodziewane_wynagrodzenie_od)<filterMinSalary&&(filterMinSalary=e.options._spodziewane_wynagrodzenie_od),parseInt(e.options._spodziewane_wynagrodzenie_do)>filterMaxSalary&&(filterMaxSalary=e.options._spodziewane_wynagrodzenie_do));else{if(o.branchesFiltr.length&&-1===o.branchesFiltr.indexOf(e.options.branches)&&o.branchesFiltr.length)return!1;if(o.jobFormsFiltr.length){let n=!1;if(!e.options._forma_zatrudnienia)return!1;if(e.options._forma_zatrudnienia.forEach((function(e){o.jobFormsFiltr.length&&-1!==o.jobFormsFiltr.indexOf(e)&&(n=!0)})),!n)return!1}if(o.jobTypesFiltr.length&&-1===o.jobTypesFiltr.indexOf(e.options.job_type)&&o.jobTypesFiltr.length)return!1;if(o.langsFiltr.length&&-1===o.langsFiltr.indexOf(e.advert.language)&&o.langsFiltr.length)return!1;if(o.remoteFiltr&&!e.options.remote)return!1;if(o.relocationFiltr&&!e.options._relokacja)return!1;if(o.salary[0]||o.salary[1]){if(1!=e.options._Widoczna_stawka)return!1;if(e.options._spodziewane_wynagrodzenie_od&&e.options._spodziewane_wynagrodzenie_do){if(o.salary[0]<e.options._spodziewane_wynagrodzenie_od&&o.salary[1]<e.options._spodziewane_wynagrodzenie_od)return!1;if(o.salary[0]>e.options._spodziewane_wynagrodzenie_do&&o.salary[1]>e.options._spodziewane_wynagrodzenie_do)return!1}if(e.options._spodziewane_wynagrodzenie_od&&!e.options._spodziewane_wynagrodzenie_do&&o.salary[0]<e.options._spodziewane_wynagrodzenie_od&&o.salary[1]<e.options._spodziewane_wynagrodzenie_od)return!1;if(!e.options._spodziewane_wynagrodzenie_od&&e.options._spodziewane_wynagrodzenie_do&&o.salary[0]>e.options._spodziewane_wynagrodzenie_do&&o.salary[1]>e.options._spodziewane_wynagrodzenie_do)return!1}}recordsNumber++,e.options.job_location&&(n=JSON.parse(e.options.job_location));let t="";e.options._forma_zatrudnienia&&e.options._forma_zatrudnienia.forEach((function(e){t=t+"<p>"+e+"</p>"})),resultsLoc.insertAdjacentHTML("beforeend",`<a href="${e.url}" target="_blank"><div class="result">\n                <div class="top">\n                    <div class="top-left">\n                        <div class="lang"><p>${e.advert.language}</p></div>\n                        <div class="branche-name">\n                            <div class="branche">${e.options.branches?e.options.branches:""}</div>\n                            <div class="name">${e.advert.name}</div>\n                        </div>\n                    </div>\n                    <div class="top-right">\n                        ${e.options.job_type?"<div class='jobtype'>"+e.options.job_type+"</div>":""}\n                        ${e.options._Widoczna_stawka&&e.options._spodziewane_wynagrodzenie_od&&e.options._spodziewane_wynagrodzenie_do?"<div class='salary'>"+e.options._spodziewane_wynagrodzenie_od+" - "+e.options._spodziewane_wynagrodzenie_do+"</div>":""}\n                    </div>\n                </div>\n\n                <div class="bottom">\n                    <div class="bottom-left">\n                        <div class="city"><img src="./img/location_dot.svg">${n.locality}</div>\n                        ${e.options.remote?"<div class='remote'>remote</div>":""}\n                        ${e.options._relokacja?"<div class='relocation'>relocation</div>":""}\n                    </div>\n                        <div class="bottom-right">\n                            <div class="employmentform">${t}</div>\n                        </div>\n                    </div>\n                </div>\n\n            </div></a>`)})),getAPIPage(++apiPage,o)},filterHTML=(e,o,n,t,r,i)=>{e.length>0&&(e.sort(),rowHeight=21*e.length+3,branchesLoc.style.height=String(rowHeight)+"px",e.forEach((function(e){branchesLoc.insertAdjacentHTML("beforeend",`<option value="${e}">${e}</option>`)}))),o.length>0&&(o.sort(),rowHeight=21*o.length+3,jobFormLoc.style.height=String(rowHeight)+"px",o.forEach((function(e){jobFormLoc.insertAdjacentHTML("beforeend",`<option value="${e}">${e}</option>`)}))),n.length>0&&(n.sort(),rowHeight=21*n.length+3,jobTypeLoc.style.height=String(rowHeight)+"px",n.forEach((function(e){jobTypeLoc.insertAdjacentHTML("beforeend",`<option value="${e}">${e}</option>`)}))),t.length>0&&(t.sort(),rowHeight=21*t.length+3,langLoc.style.height=String(rowHeight)+"px",t.forEach((function(e){langLoc.insertAdjacentHTML("beforeend",`<option value="${e}">${e}</option>`)}))),sliderOne.value=r,sliderTwo.value=i,sliderOne.min=r,sliderTwo.min=r,sliderOne.max=i,sliderTwo.max=i,slideOne(),slideTwo()};let minGap=0;function slideOne(){parseInt(sliderTwo.value)-parseInt(sliderOne.value)<=minGap&&(sliderOne.value=parseInt(sliderTwo.value)-minGap),displayValOne.textContent=sliderOne.value,fillColor()}function slideTwo(){parseInt(sliderTwo.value)-parseInt(sliderOne.value)<=minGap&&(sliderTwo.value=parseInt(sliderOne.value)+minGap),displayValTwo.textContent=sliderTwo.value,fillColor()}function fillColor(){percent1=(sliderOne.value-sliderOne.min)/(sliderOne.max-sliderOne.min)*100,percent2=(sliderTwo.value-sliderOne.min)/(sliderOne.max-sliderOne.min)*100,sliderTrack.style.background=`linear-gradient(to right, #dadae5 ${percent1}%, #fe7320ff ${percent1}%, #fe7320ff ${percent2}%, #dadae5 ${percent2}%)`}slideOne(),slideTwo();const getFilteredData=()=>{const e=document.querySelectorAll(".branches option"),o=document.querySelectorAll(".job-form option"),n=document.querySelectorAll(".job-type option"),t=document.querySelectorAll(".lang option");searchBtn.style.pointerEvents="none";setTimeout((()=>{searchBtn.style.pointerEvents="auto"}),3e3),filterObj={};let r,i,a=Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value})),s=Array.from(o).filter((function(e){return e.selected})).map((function(e){return e.value})),l=Array.from(n).filter((function(e){return e.selected})).map((function(e){return e.value})),d=Array.from(t).filter((function(e){return e.selected})).map((function(e){return e.value})),c=remoteLoc.checked,p=relocationLoc.checked;salaryMarkLoc.checked&&(r=displayValOne.innerText,i=displayValTwo.innerText),filterObj.branchesFiltr=a,filterObj.jobFormsFiltr=s,filterObj.jobTypesFiltr=l,filterObj.langsFiltr=d,filterObj.remoteFiltr=c,filterObj.relocationFiltr=p,filterObj.salary=[r,i],apiPage=1,apiDataLength=0,recordsNumber=0,getAPIPage(apiPage,filterObj),resultsLoc.replaceChildren(),recNumLoc.replaceChildren()};searchBtn.addEventListener("click",getFilteredData);
//# sourceMappingURL=all.min.js.map
